<ngx-spinner bdColor="rgba(51, 51, 51, 0.8)" size="large" color="#fff" type="ball-clip-rotate"></ngx-spinner>
<mat-toolbar class="head" color="primary">
  <mat-toolbar-row>
    <mat-grid-list cols="15" class="bar">
      <mat-grid-tile colspan="1"></mat-grid-tile>
      <mat-grid-tile colspan="2" class="title">
        <a href="/#/home">
          <span>首页</span>
        </a>
        <span> -> </span>
        <span>个人中心</span>
      </mat-grid-tile>
      <mat-grid-tile colspan="12"></mat-grid-tile>
    </mat-grid-list>
  </mat-toolbar-row>
</mat-toolbar>

<mat-toolbar class="body" color="primary">
  <mat-grid-list cols="69" rowHeight="500px" class="bbar">
    <mat-grid-tile colspan="4"></mat-grid-tile>
    <mat-grid-tile colspan="12" class="list">
      <div>
        <h3 class="title1">订单中心</h3>
        <li>
          <a href="javascript:void(0);" (click)="change(1)" [ngClass]="{'choose': flag[1]}">待支付订单</a>
        </li>
        <li>
          <a href="javascript:void(0);" (click)="change(2)" [ngClass]="{'choose': flag[2]}">待收货订单</a>
        </li>
        <li>
          <a href="javascript:void(0);" (click)="change(3)" [ngClass]="{'choose': flag[3]}">评价晒单</a>
        </li>
        <h3 class="title1">个人中心</h3>
        <li>
          <a class="choose" href="/#/selfcenter" (click)="change(0)" [ngClass]="{'choose': flag[0]}">我的个人中心</a>
        </li>
        <li>
          <a href="/#/message">消息通知</a>
        </li>
        <li>
          <a href="/#/favorite">喜欢的商品</a>
        </li>
        <li>
          <a href="/#/scaddress">收货地址</a>
        </li>
        <h3 class="title1">账户管理</h3>
        <li>
          <a href="javascript:void(0);" (click)="change(4)" [ngClass]="{'choose': flag[4]}">个人信息</a>
        </li>
        <li>
          <a href="">修改密码</a>
        </li>
      </div>
    </mat-grid-tile>
    <mat-grid-tile colspan="1"></mat-grid-tile>
    <mat-grid-tile colspan="50" class="list" *ngIf="flag[0]">
      <mat-grid-list cols="5" rowHeight="150px" class="top">
        <mat-grid-tile colspan="1" class="toprow mat-elevation-z8">
          <div class="usermessage">
            <img class="avatar" :src="{{newCustomer.cPictureurl}}" (click)="showFileChoose()">
            <h1 class="name">{{newCustomer.cName}}</h1>
            <span class="welcome">您好~Are you OK?</span>
          </div>
        </mat-grid-tile>
        <mat-grid-tile colspan="4" class="toprow1">
          <mat-grid-list cols="2" class="itemlist" rowHeight="2:1">
            <mat-grid-tile class="itemtile">
              <img class="avatar1" src="https://s01.mifile.cn/i/user/portal-icon-1.png">
              <div class="usermessage">
                <h2>待支付的订单:
                  <span class="num">{{oNum1}}</span>
                </h2>
                <a href="javascript:void(0);" (click)="change(1)">查看待支付订单></a>
              </div>
            </mat-grid-tile>
            <mat-grid-tile class="itemtile">
              <img class="avatar1" src="https://s01.mifile.cn/i/user/portal-icon-1.png">
              <div class="usermessage">
                <h2>待收货的订单:
                  <span class="num">{{oNum2}}</span>
                </h2>
                <a href="javascript:void(0);" (click)="change(2)">查看待收货订单></a>
              </div>
            </mat-grid-tile>
            <mat-grid-tile class="itemtile">
              <img class="avatar1" src="https://s01.mifile.cn/i/user/portal-icon-3.png">
              <div class="usermessage">
                <h2>待评价商品数:
                  <span class="num">{{oNum3}}</span>
                </h2>
                <a href="javascript:void(0);" (click)="change(3)">查看待评价商品></a>
              </div>
            </mat-grid-tile>
            <mat-grid-tile class="itemtile">
              <img class="avatar1" src="https://s01.mifile.cn/i/user/portal-icon-3.png">
              <div class="usermessage">
                <h2>喜欢的商品:
                  <span class="num">{{fNum4}}</span>
                </h2>
                <a href="/#/favorite">查看喜欢的商品></a>
              </div>
            </mat-grid-tile>
          </mat-grid-list>
        </mat-grid-tile>
      </mat-grid-list>
    </mat-grid-tile>
    <mat-grid-tile colspan="50" class="list" *ngIf="flag[1]">
      <mat-grid-list class="goods-grid-list" cols="3" rowHeight="380px">
        <mat-grid-tile class="goods-tile" *ngFor="let good of goodsData[0];let i=index">
          <mat-card class="example-card">
            <mat-card-header>
              <mat-card-title class="card-tile">{{good.gName}}</mat-card-title>
            </mat-card-header>
            <img class="card-pic" mat-card-image :src="{{good.gPictureurl}}" alt="Photo of a Shiba Inu">
            <mat-card-content class="card-content">
              {{good.gPrice}}元
            </mat-card-content>
            <mat-card-actions class="card-action">
              <button mat-raised-button color="accent" (click)="pay(i)">付款</button>
            </mat-card-actions>
          </mat-card>
        </mat-grid-tile>
      </mat-grid-list>
    </mat-grid-tile>
    <mat-grid-tile colspan="50" class="list" *ngIf="flag[2]">
      <mat-grid-list class="goods-grid-list" cols="3" rowHeight="380px">
        <mat-grid-tile class="goods-tile" *ngFor="let orderGoods of orderGoodsData[1];let i=index">
          <mat-card class="example-card">
            <mat-card-header>
              <mat-card-title class="card-tile">{{orderGoods.goods.gName}}</mat-card-title>
            </mat-card-header>
            <img class="card-pic" mat-card-image :src="{{orderGoods.goods.gPictureurl}}" alt="Photo of a Shiba Inu">
            <mat-card-content class="card-content">
              {{orderGoods.ogPrice}}元
            </mat-card-content>
            <mat-card-actions class="card-action">
              <button mat-raised-button color="accent" (click)="accept(i)">确认收货</button>
            </mat-card-actions>
          </mat-card>
        </mat-grid-tile>
      </mat-grid-list>
    </mat-grid-tile>
    <mat-grid-tile colspan="50" class="list" *ngIf="flag[3]">
      <mat-grid-list class="goods-grid-list" cols="3" rowHeight="380px">
        <mat-grid-tile class="goods-tile" *ngFor="let orderGood of unCommentGoodsData;let i=index">
          <mat-card class="example-card">
            <mat-card-header>
              <mat-card-title class="card-tile">{{orderGood.goods.gName}}</mat-card-title>
            </mat-card-header>
            <img class="card-pic" mat-card-image :src="{{orderGood.goods.gPictureurl}}" alt="Photo of a Shiba Inu">
            <mat-card-content class="card-content">
              {{orderGood.goods.gPrice}}元
            </mat-card-content>
            <mat-card-actions class="card-action">
              <button mat-raised-button color="accent" (click)="comment(template, i)">评论</button>
            </mat-card-actions>
          </mat-card>
        </mat-grid-tile>
      </mat-grid-list>
    </mat-grid-tile>
    <mat-grid-tile colspan="50" class="list" *ngIf="flag[4]">
      <mat-grid-list cols="5" rowHeight="150px" class="top">
        <mat-grid-tile colspan="1" class="toprow mat-elevation-z8">
          <div class="usermessage">
            <!-- <input id="" class="input" type="file" (change)="changeListener($event)"> -->
            <img class="avatar" :src="{{newCustomer.cPictureurl}}" (click)="showFileChoose()">
            <h1 class="name">{{newCustomer.cName}}</h1>
            <span class="welcome">您好~Are you OK?</span>
          </div>
        </mat-grid-tile>
        <mat-grid-tile colspan="4" class="toprow1">
          <div class="container">
            <div class="row">
              <div class="col"></div>
              <div class="col-6">
                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1">ID</span>
                  </div>
                  <input disabled type="text" class="form-control" placeholder="Username" [(ngModel)]="newCustomer.cId" aria-label="Username"
                    aria-describedby="basic-addon1">
                </div>
              </div>
              <div class="col"></div>
            </div>
            <div class="row">
              <div class="col"></div>
              <div class="col-6">
                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1">手机号码</span>
                  </div>
                  <input disabled type="text" class="form-control" placeholder="Username" [(ngModel)]="newCustomer.cTelephone" aria-label="Username"
                    aria-describedby="basic-addon1">
                </div>
              </div>
              <div class="col"></div>
            </div>
            <div class="row">
              <div class="col"></div>
              <div class="col-6">
                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1">昵称</span>
                  </div>
                  <input [disabled] = "nameChangeFlag" type="text" class="form-control" placeholder="Username" [(ngModel)]="newCustomer.cName" aria-label="Username"
                    aria-describedby="basic-addon1">
                  <div class="input-group-append">
                    <button class="btn btn-outline-secondary" type="button" (click)="changeName()">修改</button>
                  </div>
                </div>
              </div>
              <div class="col"></div>
            </div>
            <div class="row">
              <div class="col"></div>
              <div class="col-6">
                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1">地区</span>
                  </div>
                  <input [disabled] = "areaChangeFlag" type="text" class="form-control" placeholder="暂无信息" [(ngModel)]="newCustomer.cArea" aria-label="Username"
                    aria-describedby="basic-addon1">
                  <div class="input-group-append">
                    <button class="btn btn-outline-secondary" type="button" (click)="changeArea()">修改</button>
                  </div>
                </div>
              </div>
              <div class="col"></div>
            </div>
            <div class="row">
              <div class="col"></div>
              <div class="col-6">
                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1">电子邮箱</span>
                  </div>
                  <input [disabled] = "emailChangeFlag" type="text" class="form-control" placeholder="暂无信息" [(ngModel)]="newCustomer.cEmail" aria-label="Username"
                    aria-describedby="basic-addon1">
                  <div class="input-group-append">
                    <button class="btn btn-outline-secondary" type="button" (click)="changeEmail()">修改</button>
                  </div>
                </div>
              </div>
              <div class="col"></div>
            </div>
            <div class="row" *ngIf="!nameChangeFlag||!areaChangeFlag||!emailChangeFlag">
                <div class="col-4"></div>
                <div class="col-2">
                    <button type="button" class="btn btn-success" (click)="update()">确认修改</button>
                </div>
                <div class="col-2">
                    <button type="button" class="btn btn-danger" (click)="abort()" >放弃修改</button>
                </div>
                <div class="col-2"></div>
              </div>
          </div>
        </mat-grid-tile>
      </mat-grid-list>
    </mat-grid-tile>
    <mat-grid-tile colspan="2"></mat-grid-tile>
  </mat-grid-list>
</mat-toolbar>

<ng-template #template>
  <div style="width: 800px; height: 600px;">
    <div class="modal-header">
      <h4 class="modal-title pull-left">评论</h4>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <div [(froalaEditor)]="options" style="width: 100%;height: 100%;" [(ngModel)]="editorContent">Hello, Froala!</div>
      <button mat-raised-button style="margin-top: 5px" color="primary" (click)="upload()">提交</button>
    </div>
  </div>
</ng-template>
